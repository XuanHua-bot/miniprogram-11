<view class="safe-top"></view>
<view class="custom-nav">
  <view class="nav-content">
    <view class="nav-title">æˆ‘çš„</view>
  </view>
</view>
<view class="container" style="padding-top: 108rpx; padding-bottom: 40rpx;">
  <view class="user-info">
    <image 
      class="avatar" 
      src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" 
      mode="aspectFill"
    />
    <view class="user-detail">
      <text class="nickname">{{userInfo.nickName || 'æœªç™»å½•'}}</text>
      <text class="user-id" wx:if="{{userInfo._id}}">ID: {{userInfo._id}}</text>
    </view>
    <view class="actions" wx:if="{{userInfo}}">
      <button class="edit-btn" bindtap="onEditProfile">ç¼–è¾‘èµ„æ–™</button>
      <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
    </view>
    <view class="login-btn" bindtap="handleLogin" wx:if="{{!userInfo}}">
      ç™»å½•/æ³¨å†Œ
    </view>
  </view>

  <view class="menu-list">
    <view class="menu-item" bindtap="navigateToMyProducts">
      <text class="menu-icon">ğŸ“¦</text>
      <text class="menu-text">æˆ‘çš„å‘å¸ƒ</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="navigateToSettings">
      <text class="menu-icon">âš™ï¸</text>
      <text class="menu-text">è®¾ç½®</text>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <view class="version-info">
    <text>ç‰ˆæœ¬ 1.0.0</text>
  </view>

  <view class="product-tabs">
    <view 
      class="tab {{activeTab === 'published' ? 'active' : ''}}"
      bindtap="onTabChange"
      data-tab="published"
    >æˆ‘å‘å¸ƒçš„</view>
    <view 
      class="tab {{activeTab === 'purchased' ? 'active' : ''}}"
      bindtap="onTabChange"
      data-tab="purchased"
    >æˆ‘è´­ä¹°çš„</view>
  </view>

  <scroll-view 
    class="product-list"
    scroll-y
    enable-back-to-top
    bindscrolltolower="loadMore"
  >
    <view class="loading" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
    <view class="no-data" wx:elif="{{!userInfo}}">è¯·å…ˆç™»å½•</view>
    <view class="no-data" wx:elif="{{products.length === 0}}">
      {{activeTab === 'published' ? 'æš‚æ— å‘å¸ƒçš„å•†å“' : 'æš‚æ— è´­ä¹°çš„å•†å“'}}
    </view>
    <view 
      class="product-item"
      wx:for="{{products}}"
      wx:key="_id"
      bindtap="onProductTap"
      data-id="{{item._id}}"
    >
      <image class="product-image" src="{{item.images[0]}}" mode="aspectFill" />
      <view class="product-info">
        <view class="product-title">{{item.title}}</view>
        <view class="product-price">Â¥{{item.price}}</view>
        <view class="product-meta">
          <text class="location">{{item.location}}</text>
          <text class="time">{{item.createTime}}</text>
        </view>
      </view>
    </view>
    <view class="no-more" wx:if="{{!loading && !hasMore}}">æ²¡æœ‰æ›´å¤šäº†</view>
  </scroll-view>

  <button class="btn btn-outline" style="margin-top:40rpx;" bindtap="onBatchAddProducts">ä¸€é”®ç”Ÿæˆæµ‹è¯•å•†å“ï¼ˆå¼€å‘ç”¨ï¼‰</button>
  <slot />
</view> 